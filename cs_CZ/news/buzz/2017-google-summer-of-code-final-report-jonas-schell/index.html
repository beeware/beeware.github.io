<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>2017 Google Summer of Code - Testing Toga/Settings API— BeeWare</title>

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/images/brutus-144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/images/brutus-114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/images/brutus-72.png">
    <link rel="apple-touch-icon-precomposed" href="/static/images/brutus-57.png">
    <link rel="shortcut icon" href="/static/images/brutus-32.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap-grid.min.css">

    <!-- Project CSS -->
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Cutive">
    <link rel="stylesheet" type="text/css" href="/static/beeware.css"><!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/078c86a30a.js" crossorigin="anonymous"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2943925-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-2943925-4');
    </script></head>
  <body>

  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <div class="nav-top">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsDefault" aria-controls="navbarsDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-brand-block">
      <a class="navbar-brand" href="/cs_CZ/"><img class="mx-2" src="/static/images/brutus-32.png?h=e18afe42">BeeWare</a>
    </div>
  </div>
  <div class="collapse navbar-collapse" id="navbarsDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
    <a class="nav-link" href="/cs_CZ/about/">O</a>
  </li>
      <li class="nav-item">
    <a class="nav-link" href="/cs_CZ/project/">Projekty</a>
  </li>
      <li class="nav-item">
    <a class="nav-link" href="/cs_CZ/community/">Komunita</a>
  </li>
      <li class="nav-item">
    <a class="nav-link" href="/cs_CZ/contributing/">Přispívání</a>
  </li>
      <li class="nav-item active">
    <a class="nav-link" href="/cs_CZ/news/">Novinky<span class="sr-only">(current)</span></a>
  </li>
      <li class="nav-item">
    <a class="nav-link" href="/cs_CZ/membership/">Přispět</a>
  </li>
    </ul>
    <ul class="nav navbar-nav navbar-right"><a class="nav-link" href="https://hosted.weblate.org/projects/beeware/website/cs" target="_blank">
          <i class="fa fa-pencil"></i><small>&nbsp;Translate on Weblate</small>
        </a>
      </li>
      <li class="nav-item dropdown dropdown-pull-right">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-globe" aria-hidden="true"></i> <span class="caret"></span>
        </a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item " href="/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">
          English
          </a>
          <a class="dropdown-item" href="/ar_AR/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">العَرَبِيَّة</a>
          <a class="dropdown-item active" href="/cs_CZ/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Čeština</a>
          <a class="dropdown-item" href="/da_DK/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Dansk</a>
          <a class="dropdown-item" href="/de_DE/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Deutsch</a>
          <a class="dropdown-item" href="/es/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Español</a>
          <a class="dropdown-item" href="/fa_IR/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">فارسی</a>
          <a class="dropdown-item" href="/fr_FR/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Français</a>
          <a class="dropdown-item" href="/it_IT/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Italiano</a>
          <a class="dropdown-item" href="/ko_KR/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">한국어</a>
          <a class="dropdown-item" href="/pl_PL/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Polski</a>
          <a class="dropdown-item" href="/pt_BR/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Português</a>
          <a class="dropdown-item" href="/tr_TR/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">Türkçe</a>
          <a class="dropdown-item" href="/zh_CN/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">中文(简体)</a>
          <a class="dropdown-item" href="/zh_TW/news/buzz/2017-google-summer-of-code-final-report-jonas-schell/">中文(繁體)</a>
        </div>
      </li>

    </ul>
  </div>
  </nav>
    <div class="content">
<div class="banner">
  <div class="container">
    <p>
  
  
  
  
  
  <a href="/cs_CZ/">Home</a>
  
 &gt;
  <a href="/cs_CZ/news/">Zprávy</a>
  
 &gt;
  <a href="/cs_CZ/news/buzz/">The Buzz</a>
  
</p>
    <h1>2017 Google Summer of Code - Testing Toga/Settings API</h1>
    <p>Posted by
        
        Jonas Schell
        
        on 2017/08/22 
    </p>
  </div>
</div>
<div class="container">
<div class="row-fluid">
  <div class="col-sm-12 col-md-10 col-lg-8" >
  
  
  <p>Google Summer of Code 2017 is coming to an end. After three month of
working on the BeeWare project, I would like to summarise my work and
share my experiences.</p>
<h2>“No Battle Plan Survives First Contact.”</h2>
<p>This was one of the first things Russell said to me after we decided to
fundamentally restructure my <a href="https://github.com/beeware/toga/issues/118">proposed GSoC timetable and
goals</a>. During the community
bounding period we discovered that Toga was even harder to test as we
expected. The tight coupling between the platform independent Toga-Core
part and the platform dependent implementations for (Windows, macOS,
iOS, Linux, Android, Django, ...) was giving us a hard time to write
meaningful tests.</p>
<p>We expect Toga to become a decently sized project, therefore we want it
to have a solid and well tested base. Given that, we decided that I
would spend most of GSoC to restructure Toga to make it more testable.
Besides that, I would also add implementation tests to check if a given
backend is implemented in the right way. If I would finish before the
end of the summer I would just start with my original project proposal.</p>
<h2>The Big Restructure of Toga</h2>
<p>With the new goals and a fresh branch I started the journey to
restructure the Toga project to make it more testable.</p>
<p>After hacking around and testing different things on a <a href="https://github.com/Ocupe/restruc_toga">separate
branch</a>. I identified that the
intertwined platform dependencies are the main problem. To separate the
Toga-Core module form its backend implementations we decided to use the
factory pattern instead of the inheritance model that we had before. Now
every backend has its own factory that produces the right widgets for
the platform it is running on. This way we have a clear separation
between Toga-Core and the implementation level. Platform dependencies
are now enclosed in the implementation level.</p>
<p>After the new structure was clear I ported Toga-Core as well as the
backends for cocoa, iOS and GTK. I did this in the Toga branch <a href="https://github.com/beeware/toga/pull/185">(The Big
Restructure of Toga [WIP]
#185)</a>. In practice this
meant that I had to manually touch almost every widget of all backends
to port them to the new factory pattern.</p>
<h2>Challenges</h2>
<p>Toga talks to native GUI frameworks, hence I had to get a good
understanding about the principles and concepts behind each and every of
these frameworks. At times I felt overwhelmed by the combined complexity
of all the parts that make up Toga. The following is list:</p>
<ul>
<li>Every Toga backend wraps around a existing and unique framework. To
wrap the framework you have to understand the framework.</li>
<li>“I love Python, why do I have to understand Objective C”? To
effectively work on the iOS and macOS backends I had to learn the
basics of Objective C – if only to read the Apple docs.</li>
<li>Toga has a lot of moving parts. There are backends, frameworks,
libraries to talk to backends, libraries to perform the layout of the
UI and more. I spend a good amount of time to understand all of these
parts. The following is just a overview of newly acquired knowledge
during GSoC:<ul>
<li><a href="https://github.com/beeware/rubicon-objc">Rubicon-ObjC</a> to talk to
the iOS and macOS backends.</li>
<li><a href="/project/utilities/colosseum/">Colosseum</a> to understand and fix
layout problems.</li>
<li><a href="https://docs.python.org/3.6/library/ast.html">AST</a> module to
perform the implementation tests.</li>
<li>The use of Design Patterns</li>
<li>How to structure large projects.</li>
<li>Read and understand big and complex code chunks.</li>
</ul>
</li>
</ul>
<h2>Other work I did</h2>
<ul>
<li>PR: Translated part of the beeware.org webpage into german. <a href="https://github.com/beeware/beeware.github.io/pull/173">(PR
#173)</a></li>
<li>Helped newcomers on Gitter and GitHub.</li>
<li>Tested if Toga would profit from static typing
<a href="https://github.com/Ocupe/toga/tree/static_typing">(toga/static_typing)</a>.</li>
<li>Created an implementation test suite based on the AST module.</li>
<li>Added test for Toga-Core.</li>
<li>Updated and extended documentation on Toga-Core as well as the macOS
and iOS Backend.</li>
<li>Created a toga-dummy backend.</li>
<li>First draft of the Settings API and working backend implementation for
macOS.</li>
<li>Many small and big fixes on Toga-Core, cocoa, iOS, and GTK backends.
All in the main PR <a href="https://github.com/beeware/toga/pull/185">beeware/toga The Big Restructure of Toga
[WIP]</a></li>
<li>PR: <a href="https://github.com/beeware/toga/pull/171">beeware/toga fix for getting the length of the filenames
array</a></li>
<li>PR: <a href="https://github.com/beeware/toga/pull/193">beeware/toga Fixed #189 cocoa.progressbar with
rehint</a></li>
<li>PR: <a href="https://github.com/beeware/briefcase-template/pull/3">beeware/briefcase-template Fix for spaces in app name. Issue
#2</a></li>
<li>PR: <a href="https://github.com/beeware/toga/pull/222">beeware/toga Toga Settings API
[WIP]</a></li>
</ul>
<h2>Future Work to be Done</h2>
<ul>
<li>All my work sits in the PR <a href="https://github.com/beeware/toga/pull/185">“The Big Restructure of Toga
[WIP]”</a>. After the missing
backends, namely Windows and Android, are ported, everything can be
merged into master. We have to wait for the missing backends, because
the new is incompatible with the old versions and they can’t coexist.</li>
<li>The Settings API from my original proposal is not finished because of
the above mentioned reasons. I have a first working draft and I will
continue working on it after GSoC in <a href="https://github.com/beeware/toga/pull/222">this
PR</a>.</li>
</ul>
<h2>Shoutout</h2>
<p>I would like to thank Russell Keith-Magee for being an awesome Mentor
and for all the time he invested in me during GSoC. I also would like to
thank the BeeWare community for helping me when ever I had a problem.
Thank you!</p>


  </div>
  <div class="hidden-sm-down col-md-2 col-lg-4"></div>

  <div class="col-sm-12 col-md-4 gutter">
    <dl>
      
      <dt>Next entry</dt>
      <dd><a href="/cs_CZ/news/buzz/2017-google-summer-of-code-final-report-adam-boniecki/">2017 Google Summer of Code - Batavia improvements</a></dd>
      

      
      <dt>Previous entry</dt>
      <dd><a href="/cs_CZ/news/buzz/a-new-yak-for-the-herd-beekeeper/">A new yak for the herd: BeeKeeper</a></dd>
      
    </dl>
  </div></div>
</div>
    </div>

    <footer class="footer">
      <div class="container text-muted">
	      <div class="d-block d-sm-none copyright">&copy; Russell Keith-Magee 2025</div>
	      <div class="float-right clearfix d-sm-block d-none">&copy; Russell Keith-Magee 2025</div>
        <p class="d-sm-block d-none">
          <a href="https://github.com/beeware/"><i class="fa fa-github fa-lg" aria-hidden="true"></i> GitHub</a> |
          <a href="https://beeware.org/bee/chat/"><i class="fa-brands fa-discord fa-lg" aria-hidden="true"></i> Discord</a> |
          <a href="https://fosstodon.org/@beeware"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i> Mastodon</a> |
          <a href="/cs_CZ/sitemap/"><i class="fa fa-sitemap fa-lg" aria-hidden="true"></i> Sitemap</a>
        </p>
        <p class="d-block d-sm-none footer-social">
          <a href="https://github.com/beeware/"><i class="fa fa-github fa-lg" aria-hidden="true"></i> GitHub</a> |
          <a href="https://beeware.org/bee/chat/"><i class="fa-brands fa-discord fa-lg" aria-hidden="true"></i> Discord</a> |
          <a rel="me" href="https://fosstodon.org/@beeware"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i> Mastodon</a>
        </p>
        <p class="d-block d-sm-none footer-sitemap">
          <a href="/cs_CZ/sitemap/"><i class="fa fa-sitemap fa-lg" aria-hidden="true"></i> Sitemap</a>
        </p>
        
        
          
        <a rel="me" href="https://cloudisland.nz/@freakboy3742" style="display:none" ></a>
          
        
          
        <a rel="me" href="https://cloudisland.nz/@glasnt" style="display:none" ></a>
          
        
          
        <a rel="me" href="https://phildini.net/@phildini" style="display:none" ></a>
          
        
          
        <a rel="me" href="https://tweets.icu/@chris_swenson" style="display:none" ></a>
          
        
          
        
          
        
          
        <a rel="me" href="https://hachyderm.io/@cflee" style="display:none" ></a>
          
        
          
        <a rel="me" href="https://hachyderm.io/@charlotte" style="display:none" ></a>
          
        
          
        <a rel="me" href="https://fosstodon.org/@danyeaw" style="display:none" ></a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        <a rel="me" href="https:///@kattstodon.com" style="display:none" ></a>
          
        
      </div>
    </footer>

    <!-- jQuery first, then Bootstrap JS. -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

    <script src="/static/tether-1.3.3/js/tether.min.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js"></script></body>
</html>
